<?xml version="1.0" encoding="Shift_JIS"?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
 "http://www.w3.org/TR/html4/strict.dtd">
<!-- saved from url=(0014)about:internet --> <!-- for too much local security warning -->
<HTML lang="ja" xmlns:v="urn:schemas-microsoft-com:vml"> 
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=shift_jis"/>
<TITLE>!DOSバッチファイル</TITLE>

<STYLE type="text/css">
v\:line, v\:rect, v\:fill, v\:image, v\:stroke, v\:roundrect, v\:oval, v\:shape, v\:path, v\:textpath
  { behavior: url(#default#VML); }
A { text-decoration:none; }
A.to_tree { color:#CCDDCC; position:absolute; margin-left:0px; font-size:8pt; }
A.to_next_page { position:absolute; margin-left:40px; font-size:8pt; }
A.to_prev_page { position:absolute; margin-left:58px; font-size:8pt; }
A:visited { color:blue }
<!-- start of insert [PATCH_OF:urlrep_tooltip] -->
DIV.tooltip { color:blue; }
DIV.tooltip textarea { display:none; margin-top:-5px; overflow:hidden; }
<!-- end of [PATCH_OF:urlrep_tooltip] -->
</STYLE>

<SCRIPT type="text/javascript">
//<![CDATA[

function  onLoad()
{
  var  divs, i

  if ( !document.getElementsByTagName )  return;

  divs = document.getElementsByTagName( "A" );
  for ( i = 0; i < divs.length; i++ ) {
    if ( divs[i].className == "to_tree" ) {
      divs[i].style.color = "blue";
      divs[i].style.cursor = "hand";
    }
  }
}

function  selectTreeElem( num )
{
  var tree_url, i1, i2, fname, fname2

  if ( parent.frames.length == 0 ) {
    location.href = "../dos_batch.html?f1=dos_batch.files/dos_batch_tree.html&sub1=svgcats_index_p" + num +
     "&f2=dos_batch.files/dos_batch_05.html&sub2=svgcats_vml_p" + num;
  }
  else {
    tree_url = parent.tree.location.href;
    i1 = tree_url.lastIndexOf( "/" );
    i2 = tree_url.lastIndexOf( "\\" );
    if ( i2 > i1 )  i1 = i2;
    fname = tree_url.substring( i1 + 1 );
    i1 = fname.lastIndexOf( "#" );
    if ( i1 >= 0 )  fname = fname.substring( 0, i1 );
    fname2 = "dos_batch.files/dos_batch_tree.html";
    i1 = fname2.lastIndexOf( "/" );
    i2 = fname2.lastIndexOf( "\\" );
    if ( i2 > i1 )  i1 = i2;
    fname2 = fname2.substring( i1 + 1 );
    if ( fname == fname2 )
      parent.tree.selectTreeElem( "svgcats_index_p" + num );
    else
      location.href = "../dos_batch.html?f1=dos_batch.files/dos_batch_tree.html&sub1=svgcats_index_p" + num +
       "&f2=dos_batch.files/dos_batch_05.html&sub2=svgcats_vml_p" + num;
  }
}

<!-- start of insert [PATCH_OF:urlrep_tooltip] -->
function  over( text, value, cols ){ text.style.display = "inline";
  text.cols=cols; text.rows=1; text.value=value; text.focus(); text.select(); }
function  out( text ){ text.style.display = "none"; }
<!-- end of [PATCH_OF:urlrep_tooltip] -->

//]]>
</SCRIPT>

</HEAD>
<BODY bgcolor="#CCDDCC" onLoad="onLoad();">

<DIV style="position:absolute; margin-left:0px; margin-top:8px; color:red; font-size:8pt;">
(for Internet Explorer)</DIV>
<v:rect style="position:absolute; margin-left:0px; margin-top:8px; width:130px; height:16px;" fillcolor="white" strokecolor="white"/>

<PAGESET>
 
<!-- page 63 --> 
<PAGE>
<A id="svgcats_vml_p63" class="to_tree" style="margin-top:-11px;" onClick="selectTreeElem( '63' );">←</A>
<A href="#svgcats_vml_p64" class="to_next_page" style="margin-top:-11px;">▼</A>
<A href="dos_batch_04.html#svgcats_vml_p62" class="to_prev_page" style="margin-top:-11px;">▲</A>
<DIV style="position:absolute; margin-left:20px; margin-top:-16px;">
<A id="page_group_top" href="dos_batch_04.html#page_group_bottom" style="text-decoration:none;">↑</A></DIV>
<v:rect style="position:absolute; margin-left:0px; margin-top:0px; width:409px; height:101px;" fillcolor="white"/>
<DIV id="text63_1" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#008000; font-weight: bold; margin-left:24px; margin-top:17px; line-height:15px; white-space:nowrap">
<A name="shift">
shift</A></DIV>
<DIV id="text63_2" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:33px; margin-top:53px; line-height:15px; white-space:nowrap">
%0, %1, %2 … の内容を シフトします。%0=%1, %1=%2, %2=%3 …</DIV>

<v:line from="0,0" to="409,0"/>
<v:line from="409,0" to="409,101"/>
<v:line from="409,101" to="0,101"/>
<v:line from="0,101" to="0,0"/>

</PAGE>
 
<!-- page 64 --> 
<PAGE>
<A id="svgcats_vml_p64" class="to_tree" style="margin-top:106px;" onClick="selectTreeElem( '64' );">←</A>
<A href="#svgcats_vml_p65" class="to_next_page" style="margin-top:106px;">▼</A>
<A href="#svgcats_vml_p63" class="to_prev_page" style="margin-top:106px;">▲</A>
<v:rect style="position:absolute; margin-left:0px; margin-top:117px; width:650px; height:3170px;" fillcolor="white"/>
<DIV id="text64_1" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#008000; font-weight: bold; margin-left:24px; margin-top:134px; line-height:15px; white-space:nowrap">
<A name="if">
if</A></DIV>
<v:rect style="position:absolute; margin-left:33px; margin-top:730px; width:178px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_2" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:41px; margin-top:737px; line-height:13px; white-space:nowrap">
if exist "%~1"&nbsp; ( command )</DIV>
<v:rect style="position:absolute; margin-left:33px; margin-top:761px; width:202px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_3" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:41px; margin-top:768px; line-height:13px; white-space:nowrap">
if not exist "%~1"&nbsp; ( command )</DIV>
<DIV id="text64_4" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:253px; margin-top:737px; line-height:15px; white-space:nowrap">
ファイルまたはフォルダーが存在するとき</DIV>
<DIV id="text64_5" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:253px; margin-top:766px; line-height:15px; white-space:nowrap">
ファイルまたはフォルダーが存在しないとき</DIV>
<DIV id="text64_6" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:57px; margin-top:901px; line-height:15px; white-space:nowrap">
フォルダの中のすべてのファイルのうち、タイムスタンプが 6/12 以降のものを表示する</DIV>
<v:rect style="position:absolute; margin-left:33px; margin-top:838px; width:412px; height:55px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_7" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:41px; margin-top:844px; line-height:15px; white-space:nowrap">
for /R %%i in (*.*) do&nbsp; (<BR/>
&nbsp; &nbsp; @if "%%~ti" geq "2006/06/12 00:00"&nbsp; ( echo %%~ni "%%~ti" %%i )<BR/>
)</DIV>
<v:rect style="position:absolute; margin-left:33px; margin-top:1759px; width:472px; height:1495px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_8" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:41px; margin-top:1765px; line-height:15px; white-space:nowrap">
&gt;if /?<BR/>
バッチ プログラム中で条件処理を実行します。<BR/>
<BR/>
IF [NOT] ERRORLEVEL 番号 コマンド<BR/>
IF [NOT] 文字列1==文字列2 コマンド<BR/>
IF [NOT] EXIST ファイル名 コマンド<BR/>
<BR/>
&nbsp; NOT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;条件が偽の場合にだけ、Windows XP がコマンドを実行する<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ことを指定します。<BR/>
<BR/>
&nbsp; ERRORLEVEL 番号&nbsp; &nbsp;最後のプログラムの実行で指定された番号以上の終了コード<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; が返されたときに、条件が真になるように指定します。<BR/>
<BR/>
&nbsp; 文字列1==文字列2&nbsp; テキスト文字列が一致するときに条件が真になるように指定<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; します。<BR/>
<BR/>
&nbsp; EXIST ファイル名&nbsp; 指定したファイル名が存在するときに条件が真になるように<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 指定します。<BR/>
<BR/>
&nbsp; コマンド&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 条件が真のときに実行するコマンドを指定します。コマンドに<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 続けて、ELSE キーワードの後、指定した条件が偽の場合に<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 実行される ELSE コマンドを指定することができます。<BR/>
<BR/>
ELSE 節は、IF の後のコマンドと同じ行に置きます。<BR/>
例:<BR/>
<BR/>
&nbsp; &nbsp; IF EXIST filename. (<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; del filename.<BR/>
&nbsp; &nbsp; ) ELSE (<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; echo filename. missing.<BR/>
&nbsp; &nbsp; )<BR/>
<BR/>
del コマンドは、改行で終了しなければならないため、次の例は、正しく動作し<BR/>
ません:<BR/>
<BR/>
&nbsp; &nbsp; IF EXIST filename. del filename. ELSE echo filename. missing<BR/>
<BR/>
ELSE コマンドは、IF コマンドの終わりと同じ行で始まらなければならないため、<BR/>
次の例は正しく動作しません:<BR/>
<BR/>
&nbsp; &nbsp; IF EXIST filename. del filename.<BR/>
&nbsp; &nbsp; ELSE echo filename. missing<BR/>
<BR/>
次の例のように、すべてのコマンドを 1 行にすれば正しく動作します:<BR/>
<BR/>
&nbsp; &nbsp; IF EXIST filename. (del filename.) ELSE echo filename. missing<BR/>
<BR/>
コマンド拡張機能を有効にすると、IF は次のように変更されます:<BR/>
<BR/>
&nbsp; &nbsp; IF [/I] 文字列1 比較演算子 文字列2 コマンド<BR/>
&nbsp; &nbsp; IF CMDEXTVERSION 番号 コマンド<BR/>
&nbsp; &nbsp; IF DEFINED 変数 コマンド<BR/>
<BR/>
比較演算子は、次のいずれかです:<BR/>
<BR/>
&nbsp; &nbsp; EQU - 等しい<BR/>
&nbsp; &nbsp; NEQ - 等しくない<BR/>
&nbsp; &nbsp; LSS - より小さい<BR/>
&nbsp; &nbsp; LEQ - 以下<BR/>
&nbsp; &nbsp; GTR - より大きい<BR/>
&nbsp; &nbsp; GEQ - 以上<BR/>
<BR/>
/I スイッチを指定すると、文字列は、大文字と小文字を区別せずに比較され<BR/>
ます。/I スイッチは、IF の 文字列1==文字列2 形式で使うこともできます。<BR/>
この比較は汎用であり、文字列1 と 文字列2 が両方とも数字だけを含む場合<BR/>
は、文字列が数値に変換され、数値の比較が行われます。<BR/>
<BR/>
CMDEXTVERSION 条件は ERRORLEVEL と同様に動作しますが、コマンド拡張機能<BR/>
に関連付けられている内部バージョン番号との比較を行います。最初のバー<BR/>
ジョンは 1 です。コマンド拡張機能に重要な拡張が追加された場合は、値が<BR/>
1 大きくなります。コマンド拡張機能が無効である場合は、CMDEXTVERSION は<BR/>
条件は常に偽です。<BR/>
<BR/>
DEFINED 条件は EXISTS と同様に動作しますが、環境変数名を受け取って、環境<BR/>
変数が定義されている場合は真を返します。<BR/>
<BR/>
%ERRORLEVEL% は、ERRORLEVEL の現在の値の文字列表記に展開されます。<BR/>
ただし、ERRORLEVEL という名前の環境変数が既に定義されている場合は、その<BR/>
環境変数の値が取得されます。プログラム実行後、次の例が ERRORLEVEL の使い方<BR/>
を説明しています:<BR/>
<BR/>
&nbsp; &nbsp; goto answer%ERRORLEVEL%<BR/>
&nbsp; &nbsp; :answer0<BR/>
&nbsp; &nbsp; echo Program had return code 0<BR/>
&nbsp; &nbsp; :answer1<BR/>
&nbsp; &nbsp; echo Program had return code 1<BR/>
<BR/>
また、上の数値比較を使うこともできます:<BR/>
<BR/>
&nbsp; &nbsp; IF %ERRORLEVEL% LEQ 1 goto okay<BR/>
<BR/>
%CMDCMDLINE% は、CMD.EXE が処理する前の、CMD.EXE に渡されたオリジナル<BR/>
のコマンド ラインに展開されます。ただし、CMDCMDLINE という名前の環境変数<BR/>
が既に定義されている場合は、その環境変数の値が取得されます。<BR/>
<BR/>
%CMDEXTVERSION% は、CMDEXTVERSION の現在の値の文字列表記に展開されます。<BR/>
ただし、CMDEXTVERSION という名前の環境変数が既に定義されている場合は、その<BR/>
環境変数の値が取得されます。<BR/>
C:\home\SVGCats_src\spec_test\workspace&gt;</DIV>
<v:rect style="position:absolute; margin-left:37px; margin-top:504px; width:184px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_9" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:45px; margin-top:511px; line-height:13px; white-space:nowrap">
if "%~1" == "A"&nbsp; ( command )</DIV>
<v:rect style="position:absolute; margin-left:37px; margin-top:595px; width:172px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_10" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:45px; margin-top:602px; line-height:13px; white-space:nowrap">
if 56 lss 123&nbsp; ( command )</DIV>
<v:rect style="position:absolute; margin-left:431px; margin-top:506px; width:148px; height:100px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_11" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:439px; margin-top:512px; line-height:15px; white-space:nowrap">
equ : ＝（等しい）<BR/>
neq : ≠（等しくない）<BR/>
lss : ＜（より小さい）<BR/>
leq : ≦（以下）<BR/>
gtr : ＞（より大きい）<BR/>
geq : ≧（以上）</DIV>
<DIV id="text64_12" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:253px; margin-top:593px; line-height:15px; white-space:nowrap">
数字だけのときは、<BR/>
数値として 56 &lt; 123 （真）</DIV>
<DIV id="text64_13" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:253px; margin-top:509px; line-height:15px; white-space:nowrap">
文字の比較</DIV>
<v:rect style="position:absolute; margin-left:37px; margin-top:626px; width:196px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_14" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:45px; margin-top:633px; line-height:13px; white-space:nowrap">
if "56" gtr "123"&nbsp; ( command )</DIV>
<DIV id="text64_15" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:253px; margin-top:631px; line-height:15px; white-space:nowrap">
"" で囲むと文字として比較<BR/>
"56" &gt; "123" （真）</DIV>
<DIV id="text64_16" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:24px; margin-top:476px; line-height:15px; white-space:nowrap">
<A name="if_var">
変数の比較</A></DIV>
<DIV id="text64_17" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:21px; margin-top:698px; line-height:15px; white-space:nowrap">
<A name="if_exist">
ファイル、フォルダーの比較</A></DIV>
<DIV id="text64_18" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:304px; margin-top:127px; line-height:15px; white-space:nowrap">
ここで書かれているものは、<BR/>
Windows 2000/Xp 以降専用のものがあります。</DIV>
<DIV id="text64_19" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:21px; margin-top:1737px; line-height:15px; white-space:nowrap">
ヘルプ</DIV>
<DIV id="text64_20" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#0000FF; margin-left:475px; margin-top:858px; line-height:15px; white-space:nowrap">
<A href="#for">
%%~ti → for</A></DIV>
<v:rect style="position:absolute; margin-left:37px; margin-top:564px; width:190px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_21" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:45px; margin-top:571px; line-height:13px; white-space:nowrap">
if /I "%~1"=="A"&nbsp; ( command )</DIV>
<DIV id="text64_22" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:253px; margin-top:569px; line-height:15px; white-space:nowrap">
大文字小文字を区別しない</DIV>
<v:rect style="position:absolute; margin-left:33px; margin-top:940px; width:382px; height:40px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_23" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:41px; margin-top:946px; line-height:15px; white-space:nowrap">
if not exist "%ProgramFiles%\prog\prog.exe"&nbsp; (<BR/>
&nbsp; &nbsp; echo prog を Program Files に入れてください &amp; goto :eof )</DIV>
<DIV id="text64_24" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:57px; margin-top:992px; line-height:15px; white-space:nowrap">
プログラムが入っていなかったら、メッセージを出して、バッチを終える。</DIV>
<v:rect style="position:absolute; margin-left:37px; margin-top:534px; width:172px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_25" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:45px; margin-top:541px; line-height:13px; white-space:nowrap">
if (%~1)==(A)&nbsp; ( command )</DIV>
<DIV id="text64_26" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#FF0000; margin-left:253px; margin-top:539px; line-height:15px; white-space:nowrap">
囲むのは "" でなくてもよい</DIV>
<DIV id="text64_27" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:8pt; color:#0000FF; margin-left:154px; margin-top:136px; line-height:12px; white-space:nowrap">
<A href="dos_batch_01.html#bat">
[ 親: DOSバッチファイル ]</A></DIV>
<DIV id="text64_28" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:8pt; color:#0000FF; margin-left:253px; margin-top:555px; line-height:12px; white-space:nowrap">
<A href="dos_batch_03.html#check">
→ パラメータ、プログラムのチェック</A></DIV>
<v:rect style="position:absolute; margin-left:37px; margin-top:165px; width:136px; height:55px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_29" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:45px; margin-top:171px; line-height:15px; white-space:nowrap">
&nbsp; if exist "a.txt" (<BR/>
&nbsp; &nbsp; echo OK<BR/>
&nbsp; )</DIV>
<v:rect style="position:absolute; margin-left:60px; margin-top:795px; width:346px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_30" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:68px; margin-top:802px; line-height:13px; white-space:nowrap">
if not exist "%~1"&nbsp; ( echo Not found "%~1"&amp; goto :eof )</DIV>
<DIV id="text64_31" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:425px; margin-top:800px; line-height:15px; white-space:nowrap">
サンプル</DIV>
<v:rect style="position:absolute; margin-left:198px; margin-top:165px; width:124px; height:85px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_32" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:206px; margin-top:171px; line-height:15px; white-space:nowrap">
if exist "a.txt" (<BR/>
&nbsp; &nbsp; echo OK<BR/>
) else (<BR/>
&nbsp; &nbsp; echo NG<BR/>
)</DIV>
<DIV id="text64_33" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:32px; margin-top:1085px; line-height:15px; white-space:nowrap">
( ) を使うと、( ) の中で値を代入した環境変数を、同じ ( ) の中で参照できません。</DIV>
<DIV id="text64_34" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#0000FF; margin-left:32px; margin-top:1606px; line-height:15px; white-space:nowrap">
<A href="dos_batch_01.html#cmd_lateenv">
遅延環境変数</A></DIV>
<DIV id="text64_35" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:117px; margin-top:1606px; line-height:15px; white-space:nowrap">
を使えば参照できますが、Windows10でも cmd.exe を起動するときに、/V:ON オプション</DIV>
<DIV id="text64_36" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:32px; margin-top:1623px; line-height:15px; white-space:nowrap">
が必要です。 ただし、/V:ON オプションを指定すると ! をファイル名や変数の値に使えなくなる副作用<BR/>
があります。</DIV>
<v:rect style="position:absolute; margin-left:338px; margin-top:1294px; width:232px; height:205px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_37" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:346px; margin-top:1300px; line-height:15px; white-space:nowrap">
if exist "a.txt" (<BR/>
&nbsp; &nbsp; set return_value=Exist<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; @set next=0<BR/>
) else (<BR/>
&nbsp; &nbsp; set return_value=NotExist<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; @set next=1<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; )<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; @if "%next%" == "1" (<BR/>
&nbsp; &nbsp; set return_value=%return_value%!<BR/>
)<BR/>
echo %return_value%<BR/>
&nbsp; &nbsp; rem // echo Exist or NotExist!<BR/>
pause</DIV>
<DIV id="text64_38" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:24px; margin-top:1053px; line-height:15px; white-space:nowrap">
<A name="if_block">
if ブロックの中に複数行を記述する （Windows バッチファイル）</A></DIV>
<DIV id="text64_39" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:32px; margin-top:1242px; line-height:15px; white-space:nowrap">
次のように、if ブロックを分ければ、前のブロックで代入した値を、後のブロックで参照できます。</DIV>
<DIV id="text64_40" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:32px; margin-top:1564px; line-height:15px; white-space:nowrap">
１つ目の if の後、２つ目の if の前に &amp; を書いて１つの行にしてしまうと、<BR/>
( ) の中の複数行と同様に、代入する前の値を参照してしまいます。</DIV>
<v:rect style="position:absolute; margin-left:63px; margin-top:1294px; width:232px; height:190px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_41" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:71px; margin-top:1300px; line-height:15px; white-space:nowrap">
if exist "." (<BR/>
&nbsp; &nbsp; set return_value=Exist<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; @set next=1<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; ) else ( set next=0 )<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; @if "%next%" == "1" (<BR/>
&nbsp; &nbsp; set return_value=%return_value%!<BR/>
) else (<BR/>
&nbsp; &nbsp; set return_value=NotExist<BR/>
)<BR/>
echo %return_value%<BR/>
&nbsp; &nbsp; rem // echo Exist! or NotExist<BR/>
pause</DIV>
<v:rect style="position:absolute; margin-left:63px; margin-top:1123px; width:238px; height:100px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_42" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:71px; margin-top:1129px; line-height:15px; white-space:nowrap">
if exist "C:\a.txt" (<BR/>
&nbsp; &nbsp; set return_value=OK<BR/>
) else (<BR/>
&nbsp; &nbsp; set return_value=NG<BR/>
&nbsp; &nbsp; set return_value_2=%return_value%<BR/>
)</DIV>
<DIV id="text64_43" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:32px; margin-top:1101px; line-height:15px; white-space:nowrap">
たとえば、下記の return_value_2 に設定する値は、すぐ上で代入する前の return_value の値になります。</DIV>
<DIV id="text64_44" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:62px; margin-top:1274px; line-height:15px; white-space:nowrap">
真の場合でブロックを分けるとき</DIV>
<DIV id="text64_45" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:335px; margin-top:1274px; line-height:15px; white-space:nowrap">
偽の場合でブロックを分けるとき</DIV>
<DIV id="text64_46" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#FF0000; margin-left:71px; margin-top:1330px; line-height:15px; white-space:nowrap">
&nbsp; &nbsp; &nbsp; &nbsp; @set next=1<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; ) else ( set next=0 )<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; @if "%next%" == "1" (</DIV>
<DIV id="text64_47" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#FF0000; margin-left:346px; margin-top:1331px; line-height:13px; white-space:nowrap">
&nbsp; &nbsp; &nbsp; &nbsp; @set next=0</DIV>
<DIV id="text64_48" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#FF0000; margin-left:346px; margin-top:1375px; line-height:15px; white-space:nowrap">
&nbsp; &nbsp; &nbsp; &nbsp; @set next=1<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; )<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; @if "%next%" == "1" (</DIV>
<DIV id="text64_49" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:71px; margin-top:1511px; line-height:15px; white-space:nowrap">
上記の真の場合と偽の場合の両方の赤い部分をそのまま記述しても期待通り動作します。</DIV>
<DIV id="text64_50" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#0000FF; margin-left:41px; margin-top:335px; line-height:15px; white-space:nowrap">
<A href="#if_var">
→ 変数の比較</A></DIV>
<DIV id="text64_51" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#0000FF; margin-left:41px; margin-top:356px; line-height:15px; white-space:nowrap">
<A href="#if_exist">
→ ファイル、フォルダーの比較</A></DIV>
<DIV id="text64_52" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#0000FF; margin-left:41px; margin-top:377px; line-height:15px; white-space:nowrap">
<A href="#if_block">
→ if ブロックの中に複数行</A></DIV>
<DIV id="text64_53" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#FF0000; margin-left:71px; margin-top:1190px; line-height:13px; white-space:nowrap">
&nbsp; &nbsp; set return_value_2=%return_value%</DIV>
<v:rect style="position:absolute; margin-left:37px; margin-top:231px; width:136px; height:40px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_54" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:45px; margin-top:237px; line-height:15px; white-space:nowrap">
&nbsp; if exist "a.txt" (<BR/>
&nbsp; &nbsp; echo OK )</DIV>
<v:rect style="position:absolute; margin-left:37px; margin-top:282px; width:196px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_55" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:45px; margin-top:289px; line-height:13px; white-space:nowrap">
&nbsp; if exist "a.txt" ( echo OK )</DIV>
<v:rect style="position:absolute; margin-left:264px; margin-top:282px; width:286px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text64_56" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:272px; margin-top:289px; line-height:13px; white-space:nowrap">
if exist "a.txt" ( echo OK ) else ( echo NG )</DIV>
<DIV id="text64_57" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#0000FF; margin-left:81px; margin-top:408px; line-height:15px; white-space:nowrap">
<A href="dos_batch_02.html#test_err">
→ エラー処理、プログラムの返り値のチェック</A></DIV>
<DIV id="text64_58" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:41px; margin-top:408px; line-height:15px; white-space:nowrap">
関連</DIV>
<DIV id="text64_59" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#0000FF; margin-left:73px; margin-top:1663px; line-height:15px; white-space:nowrap">
<A href="#for_block">
→ for ブロックの中に複数行</A></DIV>
<DIV id="text64_60" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:32px; margin-top:1663px; line-height:15px; white-space:nowrap">
関連</DIV>

<v:line from="0,117" to="650,117"/>
<v:line from="650,117" to="650,3287"/>
<v:line from="650,3287" to="0,3287"/>
<v:line from="0,3287" to="0,117"/>

</PAGE>
 
<!-- page 65 --> 
<PAGE>
<A id="svgcats_vml_p65" class="to_tree" style="margin-top:3292px;" onClick="selectTreeElem( '65' );">←</A>
<A href="#svgcats_vml_p66" class="to_next_page" style="margin-top:3292px;">▼</A>
<A href="#svgcats_vml_p64" class="to_prev_page" style="margin-top:3292px;">▲</A>
<v:rect style="position:absolute; margin-left:0px; margin-top:3303px; width:445px; height:183px;" fillcolor="white"/>
<DIV id="text65_1" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#008000; font-weight: bold; margin-left:24px; margin-top:3320px; line-height:15px; white-space:nowrap">
<A name="goto">
goto</A></DIV>
<v:rect style="position:absolute; margin-left:46px; margin-top:3429px; width:70px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text65_2" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:54px; margin-top:3436px; line-height:13px; white-space:nowrap">
goto :eof</DIV>
<DIV id="text65_3" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:134px; margin-top:3434px; line-height:15px; white-space:nowrap">
バッチファイルを終了します。 call 元へ戻ります。</DIV>
<v:rect style="position:absolute; margin-left:46px; margin-top:3350px; width:64px; height:55px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text65_4" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:54px; margin-top:3356px; line-height:15px; white-space:nowrap">
goto :L1<BR/>
<BR/>
:L1</DIV>
<DIV id="text65_5" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:8pt; color:#0000FF; margin-left:114px; margin-top:3322px; line-height:12px; white-space:nowrap">
<A href="dos_batch_01.html#bat">
[ 親: DOSバッチファイル ]</A></DIV>

<v:line from="0,3303" to="445,3303"/>
<v:line from="445,3303" to="445,3486"/>
<v:line from="445,3486" to="0,3486"/>
<v:line from="0,3486" to="0,3303"/>

</PAGE>
 
<!-- page 66 --> 
<PAGE>
<A id="svgcats_vml_p66" class="to_tree" style="margin-top:3491px;" onClick="selectTreeElem( '66' );">←</A>
<A href="#svgcats_vml_p67" class="to_next_page" style="margin-top:3491px;">▼</A>
<A href="#svgcats_vml_p65" class="to_prev_page" style="margin-top:3491px;">▲</A>
<v:rect style="position:absolute; margin-left:0px; margin-top:3502px; width:650px; height:4067px;" fillcolor="white"/>
<DIV id="text66_1" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#008000; font-weight: bold; margin-left:24px; margin-top:3519px; line-height:15px; white-space:nowrap">
<A name="for">
for</A></DIV>
<v:rect style="position:absolute; margin-left:31px; margin-top:4963px; width:550px; height:2575px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text66_2" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:39px; margin-top:4969px; line-height:15px; white-space:nowrap">
for /F "tokens=1-3 delims=/ " %%i in ('date /t') do SET DT=%%a%%b%%c <BR/>
<BR/>
<BR/>
「in セット」の各要素に対して、指定された「do コマンド」を実行します。<BR/>
<BR/>
<BR/>
FOR [オプション] %変数|%%変数 IN (セット) DO コマンド [コマンドパラメータ]<BR/>
<BR/>
&nbsp; %変数&nbsp; &nbsp; &nbsp;単一文字の置き換え可能な変数名を指定します。大文字小文字区別。<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; コマンドライン例：%i、バッチファイル例：%%i<BR/>
&nbsp; (セット)&nbsp; オプションによって変わります。ファイル セットならワイルドカードできます。<BR/>
&nbsp; コマンド&nbsp; 各ファイルごとに実行するコマンドを指定します。<BR/>
&nbsp; コマンドパラメータ<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 指定されたコマンドのパラメータまたはスイッチを指定します。<BR/>
<BR/>
<BR/>
<BR/>
コマンド拡張機能を有効にすると、次の FOR コマンドの追加形式がサポートされる<BR/>
ようになります:<BR/>
<BR/>
<BR/>
[ディレクトリ]<BR/>
FOR /D %変数 IN (セット) DO コマンド [コマンドパラメータ]<BR/>
<BR/>
&nbsp; &nbsp; セットがワイルドカードを含む場合は、ファイル名ではなくディレクトリ名<BR/>
&nbsp; &nbsp; の一致を指定します。<BR/>
&nbsp; &nbsp; サブディレクトリを再起検索しません<BR/>
<BR/>
<BR/>
[サブディレクトリ]<BR/>
FOR /R [[ドライブ:]パス] %変数 IN (セット) DO コマンド [コマンドパラメータ]<BR/>
<BR/>
&nbsp; &nbsp; [ドライブ:]パスから始めて、ツリーの各ディレクトリで FOR 文を実行し<BR/>
&nbsp; &nbsp; ます。/R の後にディレクトリが指定されていない場合は、現在の<BR/>
&nbsp; &nbsp; ディレクトリが使用されます。セットが単一のピリオド (.) である場合は、<BR/>
&nbsp; &nbsp; ディレクトリ ツリーの列挙だけを行います。<BR/>
<BR/>
&nbsp; &nbsp; 例： for /R %%i in (build.log) do echo %%i<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;%%i には、サブディレクトリのそれぞれに、build.log を付けたものが入ります。<BR/>
<BR/>
&nbsp; &nbsp; 例： for /R %%i in (build*) do echo %%i<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;カレントかサブディレクトリに、build から始まるファイルがあれば、%%i に入ります。<BR/>
<BR/>
&nbsp; &nbsp; 例： for /R %%i in (build.log) do if exist %%i echo %%i<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;カレントかサブディレクトリに、build.log のファイルがあれば、echo します。<BR/>
<BR/>
<BR/>
[数値]<BR/>
FOR /L %変数 IN (開始,ステップ,終了) DO コマンド [コマンドパラメータ]<BR/>
<BR/>
&nbsp; &nbsp; セットは、ステップの量ごとに変化する開始から終了までの数列です。<BR/>
&nbsp; &nbsp; たとえば、(1,1,5) は 1 2 3 4 5、(5,-1,1) は (5 4 3 2 1) という数列に<BR/>
&nbsp; &nbsp; なります。<BR/>
<BR/>
<BR/>
[ファイル][文字列][コマンド出力]<BR/>
FOR /F ["オプション"] %変数 IN (ファイル セット) DO コマンド [コマンド パラメータ]<BR/>
FOR /F ["オプション"] %変数 IN ("文字列") DO コマンド [コマンド パラメータ]<BR/>
FOR /F ["オプション"] %変数 IN ('コマンド') DO コマンド [コマンド パラメータ]<BR/>
<BR/>
&nbsp; &nbsp; または usebackq オプションの場合:<BR/>
<BR/>
FOR /F ["オプション"] %変数 IN (ファイル セット) DO コマンド<BR/>
&nbsp; &nbsp; &nbsp; &nbsp;[コマンド パラメータ]<BR/>
FOR /F ["オプション"] %変数 IN ('文字列') DO コマンド [コマンド パラメータ]<BR/>
FOR /F ["オプション"] %変数 IN (`コマンド`) DO コマンド [コマンド パラメータ]<BR/>
<BR/>
&nbsp; &nbsp; ファイル名セットは、1 つ以上のファイル名です。各ファイルが開かれ、読み<BR/>
&nbsp; &nbsp; 取られ、処理されてから、ファイル名セットの次のファイルに進みます。処理<BR/>
&nbsp; &nbsp; には、ファイルの読み取り、個々のテキスト行への分割と、0 個以上のトークン<BR/>
&nbsp; &nbsp; への解析が含まれます。その後、変数値を見つかったトークン文字列に設定して、<BR/>
&nbsp; &nbsp; for ループの本体が呼び出されます。既定では、/F は、各ファイルの各行から、<BR/>
&nbsp; &nbsp; 空白で区切られた最初のトークンを渡します。空白行はスキップされます。既定<BR/>
&nbsp; &nbsp; の解析動作を変更するには、オプションの "オプション" パラメータを指定しま<BR/>
&nbsp; &nbsp; す。これは、異なる解析オプションを指定する 1 つ以上のキーワードを含む、<BR/>
&nbsp; &nbsp; 引用符で囲まれた文字列です。キーワードは、次のとおりです:<BR/>
<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; eol=c&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;- 行末のコメント文字を指定します (1 文字)。<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; skip=n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - ファイルの先頭でスキップする行数を指定します。<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; delims=xxx&nbsp; &nbsp; &nbsp; - 区切り文字のセットを指定します。これは、既定の<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 区切り文字であるスペースとタブを置き換えます。<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; tokens=x,y,m-n&nbsp; - 各繰り返しに対して、各行から for 本体に渡すトー<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; クンを指定します。これにより、追加の変数名が割り当<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; てられます。m-n の形式は範囲で、m 番目から n 番目の<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; トークンを指定します。tokens= 文字列の最後の文字が<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; アスタリスクである場合は、追加の変数が割り当てられ、<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 最後のトークンが解析された後、行に含まれている残り<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; のテキストを受け取ります。<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; usebackq&nbsp; &nbsp; &nbsp; &nbsp; - 次の新しい表示形式を指定します。逆引用符で囲まれた<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 文字列がコマンドとして実行され、一重引用符で囲まれた<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 文字列がリテラル文字列コマンドになりファイル名セット<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; のファイル名を二重引用符で囲めるようになります。<BR/>
<BR/>
&nbsp; &nbsp; 例:<BR/>
<BR/>
&nbsp; &nbsp; FOR /F "eol=; tokens=2,3* delims=, " %i in (myfile.txt) do @echo %i %j %k<BR/>
<BR/>
<BR/>
&nbsp; &nbsp; この例は、myfile.txt の各行を解析します。セミコロンで始まる行を無視し、<BR/>
&nbsp; &nbsp; 各行の 2 番目と 3 番目のトークンを for 本体に渡します。トークンは、カンマ<BR/>
&nbsp; &nbsp; またはスペースで区切られています。for 本体の文が %i で 2 番目のトークン<BR/>
&nbsp; &nbsp; を、%j で 3 番目のトークンを取得し、%k で 3 番目以降のすべてのトークンを<BR/>
&nbsp; &nbsp; 取得していることに注意してください。スペースを含むファイル名に対しては、<BR/>
&nbsp; &nbsp; 二重引用符でファイル名を引用する必要があります。この方法で二重引用符を使う<BR/>
&nbsp; &nbsp; ためには、usebackq オプションを使わなければなりません。使わなければ、二重<BR/>
&nbsp; &nbsp; 引用符はリテラル文字列の定義として解釈され、解析されます。<BR/>
<BR/>
&nbsp; &nbsp; %i は for 文で明示的に宣言され、%j と %k は tokens= オプションで暗黙的に<BR/>
&nbsp; &nbsp; 宣言されています。tokens= 行を使って 26 個までのトークンを指定できますが、<BR/>
&nbsp; &nbsp; 文字 'z' または 'Z' よりも高い変数を宣言することはできません。FOR 変数名は<BR/>
&nbsp; &nbsp; 単一の文字で、大文字と小文字を区別し、グローバルなものであり、一度にアクティ<BR/>
&nbsp; &nbsp; ブにできるのは合計 52 個までです。<BR/>
<BR/>
&nbsp; &nbsp; また、カッコで囲んだファイル名セットを一重引用符で囲み、文字列にすることに<BR/>
&nbsp; &nbsp; より、即時の文字列に対する FOR /F 解析ロジックを使うこともできます。<BR/>
&nbsp; &nbsp; これは、ファイルからの単一入力行として処理されます。<BR/>
<BR/>
&nbsp; &nbsp; 最後に、FOR /F コマンドを使って、コマンド出力を解析することができます。<BR/>
&nbsp; &nbsp; カッコの中のファイル名セットを逆引用符で囲みます。この文字列は、コマンド<BR/>
&nbsp; &nbsp; ラインとして子 CMD.EXE に渡されます。出力はメモリにキャプチャされ、ファイ<BR/>
&nbsp; &nbsp; ルのように解析されます。<BR/>
<BR/>
&nbsp; &nbsp; 例:<BR/>
<BR/>
&nbsp; &nbsp; &nbsp; FOR /F "usebackq delims==" %i IN (`set`) DO @echo %i<BR/>
<BR/>
&nbsp; &nbsp; この例は、現在の環境の環境変数名を列挙します。<BR/>
<BR/>
<BR/>
また、FOR 変数参照の置換も拡張されました。<BR/>
次のオプション構文を使うことができます:<BR/>
<BR/>
バッチファイルでは、 %I は %%I になります。<BR/>
&nbsp; &nbsp; %I&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - ファイルのフルパス&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"c:\folder\file.txt"<BR/>
&nbsp; &nbsp; %~I&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;- すべての引用句 (") を削除して、I を展開します。&nbsp; "c:\folder\file.txt"<BR/>
&nbsp; &nbsp; %~fI&nbsp; &nbsp; &nbsp; &nbsp; - %I を完全修飾パス名に展開します。&nbsp; &nbsp; "c:\folder\file.txt"<BR/>
&nbsp; &nbsp; %~dI&nbsp; &nbsp; &nbsp; &nbsp; - %I をドライブ文字だけに展開します。&nbsp; "c:"<BR/>
&nbsp; &nbsp; %~pI&nbsp; &nbsp; &nbsp; &nbsp; - %I をパス名だけに展開します。&nbsp; &nbsp; &nbsp; &nbsp; "\folder\"<BR/>
&nbsp; &nbsp; %~nI&nbsp; &nbsp; &nbsp; &nbsp; - %I をファイル名だけに展開します。&nbsp; &nbsp; "file"<BR/>
&nbsp; &nbsp; %~xI&nbsp; &nbsp; &nbsp; &nbsp; - %I をファイル拡張子だけに展開します。".txt"<BR/>
&nbsp; &nbsp; %~sI&nbsp; &nbsp; &nbsp; &nbsp; - 展開されたパスは短い名前だけを含みます。 "c:\folde~1\file~1.txt"<BR/>
&nbsp; &nbsp; %~aI&nbsp; &nbsp; &nbsp; &nbsp; - %I をファイルの属性に展開します。&nbsp; &nbsp; &nbsp;"--a------"<BR/>
&nbsp; &nbsp; %~tI&nbsp; &nbsp; &nbsp; &nbsp; - %I ファイルの日付/時刻に展開します。&nbsp; "2006/03/15 00:35"<BR/>
&nbsp; &nbsp; %~zI&nbsp; &nbsp; &nbsp; &nbsp; - %I ファイルのサイズに展開します。&nbsp; &nbsp; &nbsp;"283120"<BR/>
&nbsp; &nbsp; %~$PATH:I&nbsp; &nbsp;- PATH 環境変数に指定されているディレクトリを<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 検索し、最初に見つかった完全修飾名に %I を<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 展開します。<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 環境変数名が定義されていない場合、または検索<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; してもファイルが見つからなかった場合は、この<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 修飾子を指定すると空の文字列に展開されます。<BR/>
<BR/>
<BR/>
<BR/>
<BR/>
修飾子を組み合わせて、複合結果を得ることもできます:<BR/>
<BR/>
&nbsp; &nbsp; %~dpI&nbsp; &nbsp; &nbsp; &nbsp;- %I をドライブ文字とパスだけに展開します。&nbsp; "\folder\file"<BR/>
&nbsp; &nbsp; %~nxI&nbsp; &nbsp; &nbsp; &nbsp;- %I をファイル名と拡張子だけに展開します。&nbsp; "file.txt"<BR/>
&nbsp; &nbsp; %~fsI&nbsp; &nbsp; &nbsp; &nbsp;- %I を完全なパスと短い名前だけに展開します。<BR/>
&nbsp; &nbsp; %~dp$PATH:I - PATH 環境変数に指定されているディレクトリを<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 検索して %I を探し、最初に見つかったファイル<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; のドライブ文字とパスだけに展開します。<BR/>
&nbsp; &nbsp; %~ftzaI&nbsp; &nbsp; &nbsp;- %I を DIR コマンドの出力行のように展開します。<BR/>
<BR/>
上の例の %I と PATH は、ほかの有効な値で置き換えることができます。<BR/>
%~ 構文は、有効な FOR 変数名によって区切られます。%I のような大<BR/>
文字の変数を使うと読み取りやすく、大文字と小文字を区別しない修飾子<BR/>
との混乱を避けることができます。<BR/>
<BR/>
「コマンド拡張機能を有効 にする（Xpではデフォルト）。/e:on</DIV>
<v:rect style="position:absolute; margin-left:31px; margin-top:3549px; width:322px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text66_3" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:39px; margin-top:3556px; line-height:13px; white-space:nowrap">
for /R %%i in (a.log) do @if exist "%%i" echo "%%i"</DIV>
<v:rect style="position:absolute; margin-left:47px; margin-top:7226px; width:501px; height:40px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text66_4" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:55px; margin-top:7232px; line-height:15px; white-space:nowrap">
for /R %%i in (*.*) do echo&nbsp; 1 %%i 2 %%~i 3 %%~fi 4 %%~di 5 %%~pi 6 %%~ni 7 %%~xi<BR/>
&nbsp;8 %%sfi 9 %%~ai 1 %%~ti 2 %%~zi</DIV>
<v:rect style="position:absolute; margin-left:356px; margin-top:6884px; width:210px; height:65px;" fillcolor="#F8FFB0" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text66_5" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:364px; margin-top:6887px; line-height:15px; white-space:nowrap">
%I と %i は異なります。<BR/>
下記は /R ありのときです。<BR/>
/R なしでは、%I はファイル名だけ。<BR/>
相対パスは得られません。</DIV>
<DIV id="text66_6" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:8pt; color:#0000FF; margin-left:122px; margin-top:3521px; line-height:12px; white-space:nowrap">
<A href="dos_batch_01.html#bat">
[ 親: DOSバッチファイル ]</A></DIV>
<DIV id="text66_7" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#0000FF; margin-left:80px; margin-top:4383px; line-height:15px; white-space:nowrap">
<A href="dos_batch_06.html#rmdir_samp">
→ rmdir のサンプル</A></DIV>
<DIV id="text66_8" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:39px; margin-top:3620px; line-height:15px; white-space:nowrap">
( ) の中にワイルドカードがあれば、ファイルまたはフォルダーがあるもののみマッチします。<BR/>
( ) の中にワイルドカードが無ければ、ファイルの有無に関係なく全サブフォルダとマッチします。<BR/>
/R はサブ フォルダー、/D はディレクトリのみ。<BR/>
( ) の中に、絶対パスを指定することもできますが、/R を指定してもサブ フォルダーにマッチしません。<BR/>
サブ フォルダーにもマッチさせたいときは、カレント フォルダーをそのフォルダーに移動して、ファイル名<BR/>
またはフォルダー名を ( ) の中に指定してください。<BR/>
<BR/>
%%i は、コマンドラインでは %i、バッチファイルでは %%i<BR/>
%%i は、空白を含んだパスでも "" で囲まれていません。<BR/>
%%i は、for /R&nbsp; オプションがあると、フル パスになり、無いと、ファイル名だけになります。</DIV>
<v:rect style="position:absolute; margin-left:46px; margin-top:3867px; width:220px; height:190px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text66_9" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:54px; margin-top:3873px; line-height:15px; white-space:nowrap">
pushd ..<BR/>
for /R %%i in (readme.txt) do (<BR/>
&nbsp; if exist "%%i" (<BR/>
&nbsp; &nbsp; echo %%i<BR/>
&nbsp; &nbsp; if errorlevel 1 goto exit_for1<BR/>
&nbsp; )<BR/>
)<BR/>
:exit_for1<BR/>
echo.<BR/>
echo done in %cd%<BR/>
echo.<BR/>
popd</DIV>
<DIV id="text66_10" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:39px; margin-top:4383px; line-height:15px; white-space:nowrap">
関連</DIV>
<DIV id="text66_11" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:96px; margin-top:3839px; line-height:15px; white-space:nowrap">
親フォルダの全サブフォルダにある readme.txt ファイルのパスを一覧する</DIV>
<v:rect style="position:absolute; margin-left:46px; margin-top:4117px; width:286px; height:250px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text66_12" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:54px; margin-top:4123px; line-height:15px; white-space:nowrap">
set src_name=readme.txt<BR/>
set src=folderX\%src_name%<BR/>
pushd ..<BR/>
for /R %%i in (%src_name%) do (<BR/>
&nbsp; if exist "%%i" if not "%cd%\%src%"=="%%i" (<BR/>
&nbsp; &nbsp; fc "%src%" "%%i"<BR/>
&nbsp; &nbsp; if errorlevel 1 goto exit_for1<BR/>
&nbsp; )<BR/>
)<BR/>
:exit_for1<BR/>
echo.<BR/>
echo done in %cd%<BR/>
echo.<BR/>
popd<BR/>
set src_name=<BR/>
set src=</DIV>
<DIV id="text66_13" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:90px; margin-top:4097px; line-height:15px; white-space:nowrap">
..\folderX\readme.txt と、それ以外の readme.txt ファイルを比較する</DIV>
<v:rect style="position:absolute; margin-left:442px; margin-top:7044px; width:76px; height:19px;" fillcolor="#F8FFB0" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text66_14" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:450px; margin-top:7048px; line-height:13px; white-space:nowrap">
%%~ni%%~xi</DIV>
<v:rect style="position:absolute; margin-left:442px; margin-top:7014px; width:76px; height:19px;" fillcolor="#F8FFB0" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text66_15" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:450px; margin-top:7018px; line-height:13px; white-space:nowrap">
%%~di%%~pi</DIV>
<v:rect style="position:absolute; margin-left:31px; margin-top:3581px; width:316px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text66_16" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:39px; margin-top:3588px; line-height:13px; white-space:nowrap">
for /D /R %%i in (*) do @if exist "%%i" echo "%%i"</DIV>
<DIV id="text66_17" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:32px; margin-top:4478px; line-height:15px; white-space:nowrap">
( ) を使うと、( ) の中で値を代入した環境変数を、同じ ( ) の中で参照できません。</DIV>
<DIV id="text66_18" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:24px; margin-top:4446px; line-height:15px; white-space:nowrap">
<A name="for_block">
for ブロックの中に複数行を記述する （Windows バッチファイル）</A></DIV>
<DIV id="text66_19" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:24px; margin-top:4935px; line-height:15px; white-space:nowrap">
ヘルプ表示</DIV>
<DIV id="text66_20" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#0000FF; margin-left:40px; margin-top:3779px; line-height:15px; white-space:nowrap">
<A href="#for_block">
→ for ブロックの中に複数行を記述する （Windows バッチファイル）</A></DIV>
<DIV id="text66_21" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:24px; margin-top:3839px; line-height:15px; white-space:nowrap">
サンプル</DIV>
<DIV id="text66_22" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:24px; margin-top:4097px; line-height:15px; white-space:nowrap">
サンプル</DIV>
<DIV id="text66_23" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:32px; margin-top:4865px; line-height:15px; white-space:nowrap">
関連</DIV>
<DIV id="text66_24" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#0000FF; margin-left:73px; margin-top:4865px; line-height:15px; white-space:nowrap">
<A href="#if_block">
→ if ブロックの中に複数行</A></DIV>
<v:rect style="position:absolute; margin-left:63px; margin-top:4517px; width:274px; height:85px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text66_25" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:71px; margin-top:4523px; line-height:15px; white-space:nowrap">
&nbsp; &nbsp; for /D /R %%i in (*) do (<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; set return_value=%%i<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; set return_value_2=%return_value% !<BR/>
&nbsp; &nbsp; )<BR/>
&nbsp; &nbsp; set return_value=%return_value% !</DIV>
<DIV id="text66_26" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:32px; margin-top:4495px; line-height:15px; white-space:nowrap">
たとえば、下記の return_value_2 に設定する値は、すぐ上で代入する前の return_value の値になります。</DIV>
<DIV id="text66_27" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#FF0000; margin-left:71px; margin-top:4554px; line-height:13px; white-space:nowrap">
&nbsp; &nbsp; &nbsp; &nbsp; set return_value_2=%return_value%</DIV>
<DIV id="text66_28" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:32px; margin-top:4631px; line-height:15px; white-space:nowrap">
次のように、for ブロックの中から call すれば、ブロックの外に出すことができ、代入した値をすぐに<BR/>
参照できます。</DIV>
<v:rect style="position:absolute; margin-left:63px; margin-top:4672px; width:256px; height:175px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text66_29" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:71px; margin-top:4678px; line-height:15px; white-space:nowrap">
:ExampleFunction<BR/>
&nbsp; &nbsp; for /D /R %%i in (*) do (<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; call :ExampleFunction_Sub&nbsp; "%%i"<BR/>
&nbsp; &nbsp; )<BR/>
&nbsp; &nbsp; set return_value=%return_value%<BR/>
goto :eof<BR/>
<BR/>
:ExampleFunction_Sub<BR/>
&nbsp; &nbsp; set return_value=%~1<BR/>
&nbsp; &nbsp; set return_value=%return_value% !<BR/>
goto :eof</DIV>
<DIV id="text66_30" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#FF0000; margin-left:71px; margin-top:4709px; line-height:13px; white-space:nowrap">
&nbsp; &nbsp; &nbsp; &nbsp; call :ExampleFunction_Sub&nbsp; "%%i"</DIV>
<DIV id="text66_31" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#FF0000; margin-left:197px; margin-top:4784px; line-height:13px; white-space:nowrap">
%~1 </DIV>

<v:line from="0,3502" to="650,3502"/>
<v:line from="650,3502" to="650,7569"/>
<v:line from="650,7569" to="0,7569"/>
<v:line from="0,7569" to="0,3502"/>

</PAGE>
 
<!-- page 67 --> 
<PAGE>
<A id="svgcats_vml_p67" class="to_tree" style="margin-top:7574px;" onClick="selectTreeElem( '67' );">←</A>
<A href="#svgcats_vml_p68" class="to_next_page" style="margin-top:7574px;">▼</A>
<A href="#svgcats_vml_p66" class="to_prev_page" style="margin-top:7574px;">▲</A>
<v:rect style="position:absolute; margin-left:0px; margin-top:7585px; width:527px; height:970px;" fillcolor="white"/>
<DIV id="text67_1" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#008000; font-weight: bold; margin-left:24px; margin-top:7602px; line-height:15px; white-space:nowrap">
<A name="fc">
fc</A></DIV>
<v:rect style="position:absolute; margin-left:35px; margin-top:8198px; width:460px; height:325px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text67_2" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:43px; margin-top:8204px; line-height:15px; white-space:nowrap">
FC [/A] [/C] [/L] [/LBn] [/N] [/OFF[LINE]] [/T] [/U] [/W] [/nnnn]<BR/>
&nbsp; &nbsp;[ドライブ1:][パス1]ファイル名1 [ドライブ2:][パス2]ファイル名2<BR/>
FC /B [ドライブ1:][パス1]ファイル名1 [ドライブ2:][パス2]ファイル名2<BR/>
<BR/>
&nbsp; /A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;相違する各部分の 1 行目と最後の行だけを表示します。<BR/>
&nbsp; /B&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;バイナリの比較を実行します。<BR/>
&nbsp; /C&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;英字の大文字と小文字を区別しません。<BR/>
&nbsp; /L&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ファイルを ASCII テキストとして比較します。<BR/>
&nbsp; /LBn&nbsp; &nbsp; &nbsp; &nbsp;連続する最大不一致行を指定行数に設定します。<BR/>
&nbsp; /N&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ASCII の比較で行番号を表示します。<BR/>
&nbsp; /OFF[LINE] オフライン属性が設定されたファイルをスキップしません。<BR/>
&nbsp; /T&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;タブをスペースに変換しません。<BR/>
&nbsp; /U&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unicode テキスト ファイルとしてファイルを比較します。<BR/>
&nbsp; /W&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;連続した空白 (タブとスペース) を 1 つのスペースに圧縮して比較<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;します。<BR/>
&nbsp; /nnnn&nbsp; &nbsp; &nbsp; 不一致発見後に確認する、一致すべき連続行数を指定します。<BR/>
<BR/>
&nbsp; [ドライブ1:][パス1]ファイル名1<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;比較する最初のファイルまたはファイル セットを指定します。<BR/>
&nbsp; [ドライブ2:][パス2]ファイル名2<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;比較する 2 番目のファイルまたはファイル セットを指定します。</DIV>
<v:rect style="position:absolute; margin-left:35px; margin-top:7629px; width:160px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text67_3" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:43px; margin-top:7636px; line-height:13px; white-space:nowrap">
fc&nbsp; text1.txt&nbsp; text2.txt</DIV>
<DIV id="text67_4" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:43px; margin-top:7661px; line-height:15px; white-space:nowrap">
テキストファイルやバイナリファイルを比較します。</DIV>
<v:rect style="position:absolute; margin-left:35px; margin-top:7748px; width:304px; height:55px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text67_5" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:43px; margin-top:7754px; line-height:15px; white-space:nowrap">
C:\&gt;fc text1.txt text2.txt<BR/>
ファイル text1.txt と text2.txt を比較しています<BR/>
FC: 相違点は検出されませんでした</DIV>
<DIV id="text67_6" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:43px; margin-top:7684px; line-height:15px; white-space:nowrap">
エラーレベル： 0=一致、1=不一致, 2=text1.txt か text2.txt が無い</DIV>
<v:rect style="position:absolute; margin-left:35px; margin-top:7839px; width:364px; height:145px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text67_7" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:43px; margin-top:7845px; line-height:15px; white-space:nowrap">
C:\&gt;fc text1.txt text2.txt<BR/>
ファイル text1.txt と text2.txt を比較しています<BR/>
***** text1.txt<BR/>
Test Start<BR/>
==========================================================<BR/>
***** text2.txt<BR/>
&nbsp;Test Start<BR/>
==========================================================<BR/>
*****</DIV>
<DIV id="text67_8" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:35px; margin-top:7727px; line-height:15px; white-space:nowrap">
一致するときの出力例：</DIV>
<DIV id="text67_9" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:35px; margin-top:7818px; line-height:15px; white-space:nowrap">
一致しないときの出力例：</DIV>
<DIV id="text67_10" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:30px; margin-top:8176px; line-height:15px; white-space:nowrap">
ヘルプ</DIV>
<v:rect style="position:absolute; margin-left:35px; margin-top:8037px; width:292px; height:100px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text67_11" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:43px; margin-top:8043px; line-height:15px; white-space:nowrap">
fc T_ALL_ans.txt T_ALL_log.txt<BR/>
echo.&gt;&gt; T_ALL_log.txt<BR/>
echo Test log compare is ...&gt;&gt; T_ALL_log.txt<BR/>
if not errorlevel 1 echo Pass.&gt;&gt; T_ALL_log.txt<BR/>
if&nbsp; &nbsp; &nbsp;errorlevel 1 echo Fail.&gt;&gt; T_ALL_log.txt<BR/>
start notepad T_ALL_log.txt </DIV>
<DIV id="text67_12" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:36px; margin-top:8014px; line-height:15px; white-space:nowrap">
バッチファイルサンプル：</DIV>
<DIV id="text67_13" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:338px; margin-top:8043px; line-height:15px; white-space:nowrap">
比較して<BR/>
<BR/>
<BR/>
その結果を出力して<BR/>
<BR/>
出力結果を開いています。</DIV>

<v:line from="0,7585" to="527,7585"/>
<v:line from="527,7585" to="527,8555"/>
<v:line from="527,8555" to="0,8555"/>
<v:line from="0,8555" to="0,7585"/>

</PAGE>
 
<!-- page 68 --> 
<PAGE>
<A id="svgcats_vml_p68" class="to_tree" style="margin-top:8560px;" onClick="selectTreeElem( '68' );">←</A>
<A href="#svgcats_vml_p69" class="to_next_page" style="margin-top:8560px;">▼</A>
<A href="#svgcats_vml_p67" class="to_prev_page" style="margin-top:8560px;">▲</A>
<v:rect style="position:absolute; margin-left:0px; margin-top:8571px; width:475px; height:315px;" fillcolor="white"/>
<DIV id="text68_1" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#008000; font-weight: bold; margin-left:24px; margin-top:8588px; line-height:15px; white-space:nowrap">
<A name="comp">
comp</A></DIV>
<DIV id="text68_2" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#0000FF; margin-left:67px; margin-top:8838px; line-height:15px; white-space:nowrap">
<A href="http://itpro.nikkeibp.co.jp/free/NT/WinKeyWord/20040805/1/comp.shtml" target="_blank">
→ Windowsコマンド集：（comp） (Web)</A></DIV>
<DIV id="text68_3" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:24px; margin-top:8838px; line-height:15px; white-space:nowrap">
参考</DIV>
<v:rect style="position:absolute; margin-left:35px; margin-top:8625px; width:160px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text68_4" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:43px; margin-top:8632px; line-height:13px; white-space:nowrap">
comp&nbsp; bin1.txt&nbsp; bin2.txt</DIV>
<DIV id="text68_5" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:43px; margin-top:8657px; line-height:15px; white-space:nowrap">
テキストファイル、またはバイナリファイルを比較します。</DIV>
<v:rect style="position:absolute; margin-left:35px; margin-top:8774px; width:352px; height:40px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text68_6" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:43px; margin-top:8780px; line-height:15px; white-space:nowrap">
echo n | ( comp&nbsp; "1\A\a.txt"&nbsp; "1\B\a.txt" &gt; nul 2&gt; nul )<BR/>
echo %errorlevel%</DIV>
<DIV id="text68_7" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:24px; margin-top:8747px; line-height:15px; white-space:nowrap">
サンプル</DIV>
<DIV id="text68_8" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:43px; margin-top:8680px; line-height:15px; white-space:nowrap">
同じならエラーレベルが 0、ファイルの内容が異なるなら 1、<BR/>
ファイルが存在しないなら 2 になります。</DIV>

<v:line from="0,8571" to="475,8571"/>
<v:line from="475,8571" to="475,8886"/>
<v:line from="475,8886" to="0,8886"/>
<v:line from="0,8886" to="0,8571"/>

</PAGE>
 
<!-- page 69 --> 
<PAGE>
<A id="svgcats_vml_p69" class="to_tree" style="margin-top:8891px;" onClick="selectTreeElem( '69' );">←</A>
<A href="#svgcats_vml_p70" class="to_next_page" style="margin-top:8891px;">▼</A>
<A href="#svgcats_vml_p68" class="to_prev_page" style="margin-top:8891px;">▲</A>
<v:rect style="position:absolute; margin-left:0px; margin-top:8902px; width:558px; height:801px;" fillcolor="white"/>
<DIV id="text69_1" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#008000; font-weight: bold; margin-left:24px; margin-top:8919px; line-height:15px; white-space:nowrap">
<A name="find">
find (DOS)</A></DIV>
<v:rect style="position:absolute; margin-left:24px; margin-top:8994px; width:256px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text69_2" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:32px; margin-top:9001px; line-height:13px; white-space:nowrap">
find "keyword" file.txt &gt; found_file.txt</DIV>
<v:rect style="position:absolute; margin-left:51px; margin-top:9064px; width:34px; height:55px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text69_3" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:59px; margin-top:9070px; line-height:15px; white-space:nowrap">
def<BR/>
gis<BR/>
acd</DIV>
<v:line style="position:absolute;" from="101,9091" to="174,9091" strokecolor="#000000" strokeweight="1pt"/>
<v:line style="position:absolute;" from="174,9091" to="163,9087" strokecolor="#000000" strokeweight="1pt"/>
<v:line style="position:absolute;" from="174,9091" to="163,9095" strokecolor="#000000" strokeweight="1pt"/>
<v:rect style="position:absolute; margin-left:186px; margin-top:9065px; width:142px; height:55px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text69_5" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:194px; margin-top:9071px; line-height:15px; white-space:nowrap">
------------ FILT.TXT<BR/>
gis</DIV>
<DIV id="text69_6" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:53px; margin-top:9042px; line-height:15px; white-space:nowrap">
file.txt</DIV>
<DIV id="text69_7" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:179px; margin-top:9042px; line-height:15px; white-space:nowrap">
found_file.txt</DIV>
<DIV id="text69_8" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:115px; margin-top:9067px; line-height:15px; white-space:nowrap">
find "is"</DIV>
<v:rect style="position:absolute; margin-left:24px; margin-top:9384px; width:502px; height:235px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text69_9" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:32px; margin-top:9390px; line-height:15px; white-space:nowrap">
ファイル (複数可) 内のテキスト文字列を検索します。<BR/>
<BR/>
FIND [/V] [/C] [/N] [/I] [/OFF[LINE]] "文字列" [[ドライブ:][パス]ファイル名[...]]<BR/>
<BR/>
&nbsp; /V&nbsp; &nbsp; &nbsp; &nbsp; 指定した文字列を含まない行をすべて表示します。<BR/>
&nbsp; /C&nbsp; &nbsp; &nbsp; &nbsp; 指定した文字列を含む行の数だけを表示します。<BR/>
&nbsp; /N&nbsp; &nbsp; &nbsp; &nbsp; 行番号を表示します。<BR/>
&nbsp; /I&nbsp; &nbsp; &nbsp; &nbsp; 大文字と小文字の区別をしないで検索します。<BR/>
&nbsp; /OFF[LINE] オフライン属性が設定されたファイルをスキップしません。<BR/>
&nbsp; "文字列"&nbsp; 検索する文字列を指定します。<BR/>
&nbsp; [ドライブ:][パス]ファイル名<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 検索するファイル (複数可) を指定します。<BR/>
<BR/>
パスが指定されていないときは、プロンプトで入力されたテキストまた<BR/>
は別のコマンドからパイプ処理で渡されたテキストを検索します。</DIV>
<DIV id="text69_10" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:24px; margin-top:8957px; line-height:15px; white-space:nowrap">
１つのファイルの中を検索します。<BR/>
UNIXの grep に近い。 findstr もあります。</DIV>
<DIV id="text69_11" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:8pt; color:#0000FF; margin-left:133px; margin-top:8921px; line-height:12px; white-space:nowrap">
<A href="dos_batch_01.html#bat">
[ 親: DOSバッチファイル ]</A></DIV>
<v:rect style="position:absolute; margin-left:24px; margin-top:9234px; width:286px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text69_12" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:32px; margin-top:9241px; line-height:13px; white-space:nowrap">
type file.txt | find "file1" &gt; found_file.txt</DIV>
<DIV id="text69_13" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:24px; margin-top:9208px; line-height:15px; white-space:nowrap">
パイプを使い、ファイルパスを指定しないと、パイプされた内容から検索します。</DIV>
<DIV id="text69_14" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:115px; margin-top:9297px; line-height:15px; white-space:nowrap">
find "is"</DIV>
<DIV id="text69_15" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:179px; margin-top:9272px; line-height:15px; white-space:nowrap">
found_file.txt</DIV>
<DIV id="text69_16" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:53px; margin-top:9272px; line-height:15px; white-space:nowrap">
file.txt</DIV>
<v:line style="position:absolute;" from="101,9321" to="174,9321" strokecolor="#000000" strokeweight="1pt"/>
<v:line style="position:absolute;" from="174,9321" to="163,9317" strokecolor="#000000" strokeweight="1pt"/>
<v:line style="position:absolute;" from="174,9321" to="163,9325" strokecolor="#000000" strokeweight="1pt"/>
<v:rect style="position:absolute; margin-left:51px; margin-top:9294px; width:34px; height:55px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text69_18" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:59px; margin-top:9300px; line-height:15px; white-space:nowrap">
def<BR/>
gis<BR/>
acd</DIV>
<v:rect style="position:absolute; margin-left:186px; margin-top:9295px; width:34px; height:40px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text69_19" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:194px; margin-top:9301px; line-height:15px; white-space:nowrap">
gis</DIV>
<DIV id="text69_20" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:18px; margin-top:9636px; line-height:15px; white-space:nowrap">
関連</DIV>
<DIV id="text69_21" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:59px; margin-top:9636px; line-height:15px; white-space:nowrap">
→ find (Linux)</DIV>
<DIV id="text69_22" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#0000FF; margin-left:59px; margin-top:9655px; line-height:15px; white-space:nowrap">
<A href="..\vbslib.files\vbslib_21.html#FindStringLines">
→ FindStringLines (vbslib)</A></DIV>
<DIV id="text69_23" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:24px; margin-top:9150px; line-height:15px; white-space:nowrap">
検索する文字列が見つかったときは終了コード0を、<BR/>
見つからなかったときは終了コード1を返します。</DIV>

<v:line from="0,8902" to="558,8902"/>
<v:line from="558,8902" to="558,9703"/>
<v:line from="558,9703" to="0,9703"/>
<v:line from="0,9703" to="0,8902"/>

</PAGE>
 
<!-- page 70 --> 
<PAGE>
<A id="svgcats_vml_p70" class="to_tree" style="margin-top:9708px;" onClick="selectTreeElem( '70' );">←</A>
<A href="dos_batch_06.html#svgcats_vml_p71" class="to_next_page" style="margin-top:9708px;">▼</A>
<A href="#svgcats_vml_p69" class="to_prev_page" style="margin-top:9708px;">▲</A>
<v:rect style="position:absolute; margin-left:0px; margin-top:9719px; width:544px; height:2684px;" fillcolor="white"/>
<DIV id="text70_1" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#008000; font-weight: bold; margin-left:24px; margin-top:9736px; line-height:15px; white-space:nowrap">
<A name="findstr">
findstr</A></DIV>
<DIV id="text70_2" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#0000FF; margin-left:34px; margin-top:9807px; line-height:15px; white-space:nowrap">
<A href="http://www.atmarkit.co.jp/fwin2k/win2ktips/511findstr/findstr.html" target="_blank">
→ ＠IT：Windows TIPS -- Tips：findstrで正規表現を検索する (Web)</A></DIV>
<DIV id="text70_3" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:24px; margin-top:9765px; line-height:15px; white-space:nowrap">
正規表現が使え、サブフォルダーも検索できる find です。<BR/>
grep とほぼ同じです。 Windows 2000 から使えます。</DIV>
<DIV id="text70_4" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:24px; margin-top:9847px; line-height:15px; white-space:nowrap">
検索する文字列が見つかったときは終了コード0を、<BR/>
見つからなかったときは終了コード1を返します。</DIV>
<v:rect style="position:absolute; margin-left:35px; margin-top:10143px; width:244px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text70_5" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:43px; margin-top:10150px; line-height:13px; white-space:nowrap">
findstr /S /N /R&nbsp; "\[PATCH_OF:.*\]"&nbsp; *</DIV>
<DIV id="text70_6" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:60px; margin-top:12329px; line-height:15px; white-space:nowrap">
→ grep (Linux)</DIV>
<DIV id="text70_7" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:20px; margin-top:12329px; line-height:15px; white-space:nowrap">
関連</DIV>
<v:rect style="position:absolute; margin-left:24px; margin-top:11365px; width:484px; height:790px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text70_8" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:32px; margin-top:11371px; line-height:15px; white-space:nowrap">
FINDSTR [/B] [/E] [/L] [/R] [/S] [/I] [/X] [/V] [/N] [/M] [/O] [/P] [/F:ファイ<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; ル] [/C:文字列] [/G:ファイル] [/D:ディレクトリ一覧] [/A:色属性]<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; [/OFF[LINE]] 文字列 [[ドライブ:][パス]ファイル名[ ...]]<BR/>
<BR/>
&nbsp; /B&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;行の先頭にあるパターンを検索します。<BR/>
&nbsp; /E&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;行の末尾にあるパターンを検索します。<BR/>
&nbsp; /L&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;検索文字列をリテラルとして使用します。<BR/>
&nbsp; /R&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;検索文字列を正規表現として使用します。<BR/>
&nbsp; /S&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;現在のディレクトリとすべてのサブディレクトリから一致する<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ファイルを検索します。<BR/>
&nbsp; /I&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;検索するときに大文字と小文字を区別しません。<BR/>
&nbsp; /X&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;完全に一致する行を出力します。<BR/>
&nbsp; /V&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;一致しない行のみを出力します。<BR/>
&nbsp; /N&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;一致する各行の前に行番号を出力します。<BR/>
&nbsp; /M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ファイルに一致する行があるときに、ファイル名のみを出力します。<BR/>
&nbsp; /O&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;一致する各行の前に文字オフセットを出力します。<BR/>
&nbsp; /P&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;印刷不可能な文字を含むファイルをスキップします。<BR/>
&nbsp; /OFF[LINE] 　オフライン属性が設定されたファイルをスキップしません。<BR/>
&nbsp; /A:属性&nbsp; &nbsp; &nbsp; 2 桁の 16 進数で色属性を指定します。"color /?" を参照してくだ<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;さい。<BR/>
&nbsp; /F:ファイル&nbsp; 指定したファイルからファイル一覧を読み取ります (/ を指定する<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;とコンソール)。<BR/>
&nbsp; /C:文字列&nbsp; &nbsp; 指定された文字列をリテラル検索文字列として使用します。<BR/>
&nbsp; /G:ファイル&nbsp; 指定された文字列から検索文字列を取得します (/ を指定する<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;とコンソール)。<BR/>
&nbsp; /D:ディレクトリ<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;セミコロンで区切られた検索されるディレクトリ文字列テキストの<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;一覧を検索します。<BR/>
&nbsp; [ドライブ:][パス]ファイル名<BR/>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;検索するファイルを指定します。<BR/>
<BR/>
複数の文字列を検索する場合には、引数 /C を使わず、各文字列をスペースで区切り<BR/>
ます。<BR/>
たとえば、FINDSTR "hello there" x.y と指定した場合は、ファイル x.y で "hello"<BR/>
または "there" が検索されます。<BR/>
これに対して、FINDSTR /C:"hello there" x.y と指定した場合はファイル x.y で<BR/>
"hello there" が検索されます。<BR/>
<BR/>
正規表現クイック リファレンス:<BR/>
&nbsp; .&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ワイルドカード: 任意の文字<BR/>
&nbsp; *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 繰り返し: ゼロ個以上の直前の文字またはクラス<BR/>
&nbsp; ^&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 行位置: 行頭<BR/>
&nbsp; $&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 行位置: 行末<BR/>
&nbsp; [class]&nbsp; &nbsp; &nbsp; 文字クラス: セットの任意の 1 文字<BR/>
&nbsp; [^class]&nbsp; &nbsp; &nbsp;逆クラス: セット以外の任意の 1 文字<BR/>
&nbsp; [x-y]&nbsp; &nbsp; &nbsp; &nbsp; 範囲: 指定した範囲の任意の文字<BR/>
&nbsp; \x&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;エスケープ: メタ文字 x のリテラル使用<BR/>
&nbsp; \&lt;xyz&nbsp; &nbsp; &nbsp; &nbsp; 単語位置: 単語の先頭<BR/>
&nbsp; xyz\&gt;&nbsp; &nbsp; &nbsp; &nbsp; 単語位置: 単語の終わり<BR/>
<BR/>
FINDSTR の詳細な正規表現に関しては、オンライン ヘルプのコマンド リファレンスを<BR/>
参照してください。</DIV>
<DIV id="text70_9" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:49px; margin-top:10180px; line-height:15px; white-space:nowrap">
"[PATCH_OF:" から始まり、"]" で終わる文字列を含む行を検索する。<BR/>
検索対象のファイルは、カレント・フォルダー以下にあるものすべて (*)。<BR/>
サブフォルダーも探す (/S)、 行番号を出力する (/N)、 正規表現を使う (/R)。</DIV>
<DIV id="text70_10" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:23px; margin-top:11341px; line-height:15px; white-space:nowrap">
ヘルプ</DIV>
<v:rect style="position:absolute; margin-left:62px; margin-top:10259px; width:280px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text70_11" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:70px; margin-top:10266px; line-height:13px; white-space:nowrap">
FolderB\File1.c:51:#define&nbsp; USES_EXT_FUNC&nbsp; 1</DIV>
<DIV id="text70_12" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:49px; margin-top:10238px; line-height:15px; white-space:nowrap">
出力例：</DIV>
<DIV id="text70_13" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:24px; margin-top:10112px; line-height:15px; white-space:nowrap">
サンプル : 正規表現</DIV>
<DIV id="text70_14" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:23px; margin-top:10809px; line-height:15px; white-space:nowrap">
サンプル : 複数のキーワード、空白を含むキーワード</DIV>
<v:rect style="position:absolute; margin-left:35px; margin-top:10840px; width:232px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text70_15" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:43px; margin-top:10847px; line-height:13px; white-space:nowrap">
findstr /S /N /R&nbsp; "define SYMBOL"&nbsp; *</DIV>
<DIV id="text70_16" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:55px; margin-top:10875px; line-height:15px; white-space:nowrap">
"define" または "SYMBOL" を含む行を検索する。</DIV>
<DIV id="text70_17" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:55px; margin-top:10976px; line-height:15px; white-space:nowrap">
"define SYMBOL" を含む行を検索する。</DIV>
<v:rect style="position:absolute; margin-left:35px; margin-top:10908px; width:250px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text70_18" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:43px; margin-top:10915px; line-height:13px; white-space:nowrap">
findstr /S /N /R&nbsp; /C:"define SYMBOL"&nbsp; *</DIV>
<v:rect style="position:absolute; margin-left:35px; margin-top:9925px; width:208px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text70_19" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:43px; margin-top:9932px; line-height:13px; white-space:nowrap">
findstr /S /N /L "[PATCH_OF:"&nbsp; *</DIV>
<DIV id="text70_20" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:24px; margin-top:9900px; line-height:15px; white-space:nowrap">
サンプル</DIV>
<DIV id="text70_21" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:49px; margin-top:9959px; line-height:15px; white-space:nowrap">
"[PATCH_OF:" を含む行を検索する。<BR/>
検索対象のファイルは、カレント・フォルダー以下にあるものすべて (*)。<BR/>
サブフォルダーも探す (/S)、 行番号を出力する (/N)、 リテラル表現を使う (/L)。</DIV>
<v:rect style="position:absolute; margin-left:62px; margin-top:10035px; width:370px; height:40px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text70_22" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:70px; margin-top:10041px; line-height:15px; white-space:nowrap">
FolderB\File1.c:51:&nbsp; //=== start of insert [PATCH_OF:FuncA]<BR/>
FolderB\File1.c:53:&nbsp; //=== end of [PATCH_OF:FuncA]</DIV>
<DIV id="text70_23" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:49px; margin-top:10014px; line-height:15px; white-space:nowrap">
出力例：</DIV>
<DIV id="text70_24" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:24px; margin-top:10321px; line-height:15px; white-space:nowrap">
サンプル : 検索対象ファイルの指定</DIV>
<v:rect style="position:absolute; margin-left:35px; margin-top:10353px; width:268px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text70_25" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:43px; margin-top:10360px; line-height:13px; white-space:nowrap">
findstr /S /N /L "[PATCH_OF:"&nbsp; C:\Folder\*</DIV>
<v:rect style="position:absolute; margin-left:35px; margin-top:10413px; width:232px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text70_26" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:43px; margin-top:10420px; line-height:13px; white-space:nowrap">
findstr /S /N /L "[PATCH_OF:"&nbsp; *.txt</DIV>
<DIV id="text70_27" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:53px; margin-top:10383px; line-height:15px; white-space:nowrap">
C:\Folder フォルダー以下を検索する</DIV>
<DIV id="text70_28" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:52px; margin-top:10443px; line-height:15px; white-space:nowrap">
拡張子が txt のファイルの中を検索する</DIV>
<DIV id="text70_29" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:20px; margin-top:12169px; line-height:15px; white-space:nowrap">
+ は使えません。 a+ は、aa* と表現してください。 [ab]+ は、[ab][ab]*。<BR/>
? は使えません。<BR/>
{ } を使った量指定子は使えません。<BR/>
/C オプションを指定しないと、or 検索ができます。</DIV>
<DIV id="text70_30" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:60px; margin-top:12350px; line-height:15px; white-space:nowrap">
→ 互換性 （正規表現）</DIV>
<v:rect style="position:absolute; margin-left:35px; margin-top:10939px; width:250px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text70_31" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:43px; margin-top:10946px; line-height:13px; white-space:nowrap">
findstr /S /N /R&nbsp; "/C:define SYMBOL"&nbsp; *</DIV>
<DIV id="text70_32" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:20px; margin-top:12250px; line-height:15px; white-space:nowrap">
参考</DIV>
<DIV id="text70_33" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#0000FF; margin-left:67px; margin-top:12250px; line-height:15px; white-space:nowrap">
<A href="http://stackoverflow.com/questions/8844868/what-are-the-undocumented-features-and-limitations-of-the-windows-findstr-comman" target="_blank">
→ batch file - What are the undocumented features and limitations of<BR/>
&nbsp; &nbsp; &nbsp;the Windows FINDSTR command - Stack Overflow (Web)</A></DIV>
<DIV id="text70_34" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#0000FF; margin-left:67px; margin-top:12284px; line-height:15px; white-space:nowrap">
<A href="http://stackoverflow.com/questions/11515508/how-to-use-findstr-to-capitalize-all-words-a-string" target="_blank">
→ command line - How to use FINDSTR to capitalize all words a string<BR/>
&nbsp; &nbsp; - Stack Overflow (Web)</A></DIV>
<DIV id="text70_35" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:23px; margin-top:10501px; line-height:15px; white-space:nowrap">
サンプル : 単語単位検索</DIV>
<v:rect style="position:absolute; margin-left:35px; margin-top:10529px; width:172px; height:25px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text70_36" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:43px; margin-top:10536px; line-height:13px; white-space:nowrap">
findstr /S /N&nbsp; "\&lt;abc\&gt;" *</DIV>
<DIV id="text70_37" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:56px; margin-top:10566px; line-height:15px; white-space:nowrap">
\&lt; と \&gt; でキーワードを囲みます。 ただし、&lt; と &gt; はリダイレクトの記号なので、<BR/>
上記のように " " で囲か、\^&lt;abc\^&gt; とする必要があります。</DIV>
<v:rect style="position:absolute; margin-left:69px; margin-top:10733px; width:118px; height:19px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text70_38" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:77px; margin-top:10737px; line-height:13px; white-space:nowrap">
findstr "&lt;abc&gt;" *</DIV>
<DIV id="text70_39" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#000000; margin-left:56px; margin-top:10620px; line-height:15px; white-space:nowrap">
似たような指定をしたときの違いをまとめます。</DIV>
<v:rect style="position:absolute; margin-left:69px; margin-top:10678px; width:130px; height:19px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text70_40" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:77px; margin-top:10682px; line-height:13px; white-space:nowrap">
findstr "\&lt;abc\&gt;" *</DIV>
<v:rect style="position:absolute; margin-left:69px; margin-top:10706px; width:106px; height:19px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text70_41" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:77px; margin-top:10710px; line-height:13px; white-space:nowrap">
findstr "abc" *</DIV>
<v:line style="position:absolute;" from="59,10669" to="465,10669" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text70_43" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:231px; margin-top:10651px; line-height:13px; white-space:nowrap">
abc</DIV>
<DIV id="text70_44" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:275px; margin-top:10651px; line-height:13px; white-space:nowrap">
abcde</DIV>
<DIV id="text70_45" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:387px; margin-top:10651px; line-height:13px; white-space:nowrap">
&lt;abc&gt;de</DIV>
<DIV id="text70_46" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:331px; margin-top:10651px; line-height:13px; white-space:nowrap">
&lt;abc&gt;</DIV>
<DIV id="text70_47" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:234px; margin-top:10682px; line-height:13px; white-space:nowrap">
○</DIV>
<DIV id="text70_48" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:234px; margin-top:10737px; line-height:13px; white-space:nowrap">
×</DIV>
<DIV id="text70_49" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:234px; margin-top:10710px; line-height:13px; white-space:nowrap">
○</DIV>
<DIV id="text70_50" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:284px; margin-top:10710px; line-height:13px; white-space:nowrap">
○</DIV>
<DIV id="text70_51" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:284px; margin-top:10737px; line-height:13px; white-space:nowrap">
×</DIV>
<DIV id="text70_52" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:284px; margin-top:10682px; line-height:13px; white-space:nowrap">
×</DIV>
<DIV id="text70_53" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:340px; margin-top:10737px; line-height:13px; white-space:nowrap">
○</DIV>
<DIV id="text70_54" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:340px; margin-top:10710px; line-height:13px; white-space:nowrap">
○</DIV>
<DIV id="text70_55" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:340px; margin-top:10682px; line-height:13px; white-space:nowrap">
○</DIV>
<DIV id="text70_56" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:402px; margin-top:10710px; line-height:13px; white-space:nowrap">
○</DIV>
<DIV id="text70_57" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:402px; margin-top:10737px; line-height:13px; white-space:nowrap">
○</DIV>
<DIV id="text70_58" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:402px; margin-top:10682px; line-height:13px; white-space:nowrap">
○</DIV>
<v:rect style="position:absolute; margin-left:35px; margin-top:11071px; width:178px; height:235px;" fillcolor="#E7E7E7" strokecolor="#000000" strokeweight="1pt"/>
<DIV id="text70_59" style="position:absolute; font-family: 'ＭＳ ゴシック'; font-size:9pt; color:#000000; margin-left:43px; margin-top:11077px; line-height:15px; white-space:nowrap">
@echo off<BR/>
cd /d "C:\Folder"<BR/>
<BR/>
call :find1&nbsp; Symbol_1<BR/>
call :find1&nbsp; Symbol_2<BR/>
<BR/>
pause<BR/>
goto :eof<BR/>
<BR/>
<BR/>
:find1<BR/>
echo ======= %1<BR/>
findstr /S /N /M "\&lt;%1\&gt;" *<BR/>
<BR/>
goto :eof</DIV>
<DIV id="text70_60" style="position:absolute; font-family: 'ＭＳ Ｐゴシック'; font-size:10pt; color:#408080; font-weight: bold; margin-left:23px; margin-top:11041px; line-height:15px; white-space:nowrap">
<A name="multi_grep">
サンプル : 連続実行</A></DIV>

<v:line from="0,9719" to="544,9719"/>
<v:line from="544,9719" to="544,12403"/>
<v:line from="544,12403" to="0,12403"/>
<v:line from="0,12403" to="0,9719"/>

<DIV style="position:absolute; margin-left:0px; margin-top:12403px;">
<A id="svgcats_vml_p70" class="to_tree" onClick="selectTreeElem( '70' );">←</A></DIV>
<DIV style="position:absolute; margin-left:20px; margin-top:12403px;">
<A id="page_group_bottom" href="dos_batch_06.html#page_group_top" style="text-decoration:none;">↓</A></DIV>
</PAGE>
 
</PAGESET>

<TABLE height="100%" style="position:absolute; margin-top:-9999px"><TR><TD></TD></TR></TABLE>

</BODY>
</HTML> 
 
